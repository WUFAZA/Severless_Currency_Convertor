<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghanaian Traveler Currency Service</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        h1 { color: #2c3e50; margin-bottom: 1.5rem; font-size: 1.5rem; }
        
        .input-group { margin-bottom: 1rem; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; color: #7f8c8d; font-size: 0.9rem; }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box; /* Fixes padding issues */
        }

        button {
            width: 100%;
            padding: 15px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 1rem;
        }

        button:hover { background-color: #219150; }

        #result-box {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #27ae60;
            display: none; 
            text-align: left;
        }

        .fee-breakdown { font-size: 0.85rem; color: #7f8c8d; margin-top: 0.5rem; }
        .final-amount { font-size: 1.5rem; color: #2c3e50; font-weight: bold; }
        .error { color: red; font-size: 0.9rem; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ðŸ‡¬ðŸ‡­ Traveler Exchange</h1>

        <div class="input-group">
            <label>Amount to Convert</label>
            <input type="number" id="amount" placeholder="e.g. 100" value="100">
        </div>

        <div class="input-group">
            <label>From Currency</label>
            <select id="from-currency">
                <option value="USD" selected>ðŸ‡ºðŸ‡¸ USD - US Dollar</option>
                <option value="EUR">ðŸ‡ªðŸ‡º EUR - Euro</option>
                <option value="GBP">ðŸ‡¬ðŸ‡§ GBP - British Pound</option>
                <option value="TRY">ðŸ‡¹ðŸ‡· TRY - Turkish Lira</option>
                <option value="GHS">ðŸ‡¬ðŸ‡­ GHS - Ghanaian Cedi</option>
            </select>
        </div>

        <div class="input-group">
            <label>To Currency</label>
            <select id="to-currency">
                <option value="GHS" selected>ðŸ‡¬ðŸ‡­ GHS - Ghanaian Cedi</option>
                <option value="TRY">ðŸ‡¹ðŸ‡· TRY - Turkish Lira</option>
                <option value="USD">ðŸ‡ºðŸ‡¸ USD - US Dollar</option>
                <option value="EUR">ðŸ‡ªðŸ‡º EUR - Euro</option>
                <option value="CNY">ðŸ‡¨ðŸ‡³ CNY - Chinese Yuan</option>
                <option value="NGN">ðŸ‡³ðŸ‡¬ NGN - Nigerian Naira</option>
            </select>
        </div>

        <button onclick="convertCurrency()">Calculate Exchange</button>

        <div id="error-msg" class="error"></div>

        <div id="result-box">
            <div>You Receive:</div>
            <div class="final-amount" id="final-val">0.00</div>
            <hr>
            <div class="fee-breakdown">
                Market Rate: <span id="market-rate">--</span><br>
                Bank Fee (2%): -<span id="fee-val">--</span>
            </div>
        </div>
    </div>

    <script>
        // REPLACE THIS STRING WITH YOUR ACTUAL API GATEWAY URL
        const API_URL = "YOUR_API_GATEWAY_ENDPOINT_HERE"; 
        
        // Fee Configuration 
        const FIXED_FEE = 0; 
        const PERCENT_FEE = 0.02; // Now manually placed but in the future would be replaced with an easier deployable feature to change rates

        async function convertCurrency() {
            const amount = parseFloat(document.getElementById('amount').value);
            const from = document.getElementById('from-currency').value;
            const to = document.getElementById('to-currency').value;
            const resultBox = document.getElementById('result-box');
            const errorBox = document.getElementById('error-msg');

            
            resultBox.style.display = 'none';
            errorBox.innerText = "";

            if (!amount || amount <= 0) {
                errorBox.innerText = "Please enter a valid amount.";
                return;
            }

            try {
                // 1. Call your AWS Lambda API
                const response = await fetch(API_URL);
                const data = await response.json();

                if (!data.rates) throw new Error("API Error");

                // 2. Calculate the Cross-Rate (Using USD as base)
                // Formula: (TargetRate / SourceRate)
                const rateFrom = data.rates[from];
                const rateTo = data.rates[to];
                const crossRate = rateTo / rateFrom;

                // 3. Apply Fee Logic (Amount * Rate) - Fees
                const rawTotal = amount * crossRate;
                const fee = rawTotal * PERCENT_FEE;
                const finalAmount = rawTotal - fee - FIXED_FEE;

                // 4. Update the Screen
                document.getElementById('final-val').innerText = finalAmount.toFixed(2) + " " + to;
                document.getElementById('market-rate').innerText = "1 " + from + " = " + crossRate.toFixed(4) + " " + to;
                document.getElementById('fee-val').innerText = fee.toFixed(2) + " " + to;
                
                resultBox.style.display = 'block';

            } catch (err) {
                console.error(err);
                errorBox.innerText = "Error fetching rates. Please check your API URL.";
            }
        }
    </script>

</body>
</html>
